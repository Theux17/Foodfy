{%extends "layout.njk"%}

{% block head %}
    <title>Create</title>
{% endblock %}

{% block container %}

    {% block header %}

        {% include "admin/parts/header.njk" %}

    {% endblock %}

        {% if error %}
            {% include "admin/parts/messages.njk"%}
        {% endif %}
    
        {% if succes %}
            {% include "admin/parts/messages.njk"%}
        {% endif %}
    
    <div id="main-container">

        {% block content %}

            <form class="form-create" method="POST" action="/admin/recipes" enctype="multipart/form-data">
                <div class="title-button">
                    <h2>Criando receita</h2>
                    <button class="button">Salvar receita</button>
                </div>

                {% include 'admin/recipes/fields.njk' %}
                <input type="hidden" name="userId" value="{{ session.userId }}">
            </form>

        {% endblock %}
        
    </div>
{% endblock container %}

{% block script %}
    <script>
        const succes = document.querySelector('.message.succes')

        if(succes){   
            if(String(location.href).includes("recipes")){
                setTimeout(() => {
                    location.assign("/admin/recipes/{{ recipeId }}")
                }, 3000)
            }
        }
    </script>
{% endblock script %}
