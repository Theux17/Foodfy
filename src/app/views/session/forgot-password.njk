{%extends "layout.njk"%}

{% block head %}
    <title>Password reset</title>
{% endblock %}

{% block container %}

    {% block header %}
        <a href="/">
            <a href="/" class="logo-login"><img src="/assets/logo.png" alt="Foodfy"></a>
        </a>
    {% endblock %}
    
    {% if error %}
        {% include "admin/parts/messages.njk"%}
    {% endif %}

    {% if succes %}
        {% include "admin/parts/messages.njk"%}
    {% endif %}
    
    <div id="main-container">

        {% block content %}

            <form class="forgot" method="POST" action="/admin/forgot-password">
                <h2>Esqueceu a Senha ?</h2>

                <div class="input-container">
                    <input 
                        {% if  error %}
                            style="border: 1px solid #DC4747"
                        {% endif %}
                        type="email" 
                        name="email" 
                        placeholder="Digite o seu email" 
                        value="{{ user.email }}"
                        onblur="Validate.apply(this, 'isEmail')"    
                    >
                    <button class="button">Recuperar</button>
                </div>
            </form>

        {% endblock %}
        
    </div>
{% endblock container %}

{% block script %}
    <script>
        const succes = document.querySelector('.message.succes')

        if(succes){   
            if(String(location.href).includes("forgot")){
                setTimeout(() => {
                    location.assign('/admin/login')
                }, 3000)
            }
        }
    </script>
{% endblock script %}